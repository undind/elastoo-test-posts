import{d as P,g as B,h as L,r as i,i as j,c as d,w as t,j as C,a as e,o as v,b as o,e as y,t as D,k as N}from"./index-CKqGpPPI.js";import{_ as U}from"./PostForm.vue_vue_type_script_setup_true_lang-CRYhbx5w.js";const M=P({__name:"EditPostView",setup(E){const _=B(),b=C(),n=L(()=>_.getViewPost),r=i(!1),c=i(!1),a=i({show:!1,type:"success",text:""}),s=i({title:"",body:""}),w=async()=>{c.value=!0;try{await N(n.value.id,{...n.value,...s.value}),c.value=!1,a.value={show:!0,type:"success",text:"Saved successfully."}}catch{c.value=!1,a.value={show:!0,type:"error",text:"Something went wrong"}}};return j(async()=>{r.value=!0;try{await _.fetchPost(Number(b.params.id)),s.value={title:n.value.title,body:n.value.body},r.value=!1}catch{r.value=!1}}),(m,l)=>{const g=e("v-snackbar"),k=e("v-btn"),p=e("v-col"),f=e("v-row"),x=e("v-skeleton-loader"),h=e("v-card-text"),S=e("v-card"),V=e("v-container");return v(),d(V,null,{default:t(()=>[o(g,{modelValue:a.value.show,"onUpdate:modelValue":l[0]||(l[0]=u=>a.value.show=u),timeout:2e3,color:a.value.type,location:"top right"},{default:t(()=>[y(D(a.value.text),1)]),_:1},8,["modelValue","color"]),o(f,{justify:"center"},{default:t(()=>[o(p,{cols:"12",sm:"8",md:"7",lg:"5"},{default:t(()=>[o(k,{to:{name:"home"},variant:"tonal",flat:""},{default:t(()=>[y("Back")]),_:1})]),_:1})]),_:1}),o(f,{justify:"center"},{default:t(()=>[o(p,{cols:"12",sm:"8",md:"7",lg:"5"},{default:t(()=>[r.value?(v(),d(x,{key:0,class:"border",type:"card"})):(v(),d(S,{key:1,"min-width":"100%",title:`Edit post ID: ${n.value.id}`},{default:t(()=>[o(h,null,{default:t(()=>[o(U,{onSubmit:w,title:s.value.title,"onUpdate:title":l[1]||(l[1]=u=>s.value.title=u),body:s.value.body,"onUpdate:body":l[2]||(l[2]=u=>s.value.body=u),isLoadingSubmit:c.value},null,8,["title","body","isLoadingSubmit"])]),_:1})]),_:1},8,["title"]))]),_:1})]),_:1})]),_:1})}}});export{M as default};
