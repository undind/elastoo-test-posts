import{d as C,g as L,h as j,r as c,i as D,j as E,a as t,o as v,c as m,w as e,b as o,e as h,t as U,k as _,l as $,m as z,n as I}from"./index-BrFK3--k.js";import{_ as M}from"./PostForm.vue_vue_type_script_setup_true_lang-CDjDPVxY.js";const R=$("div",{class:"display-3 mt-5"},"Post not found.",-1),F=C({__name:"EditPostView",setup(T){const f=L(),p=z(),r=j(()=>f.getViewPost),a=c(!1),i=c(!1),d=c(!1),s=c({show:!1,type:"success",text:""}),l=c({title:"",body:""}),k=async()=>{i.value=!0;try{await I(r.value.id,{...r.value,...l.value}),i.value=!1,s.value={show:!0,type:"success",text:"Saved successfully."}}catch{i.value=!1,s.value={show:!0,type:"error",text:"Something went wrong"}}};return D(async()=>{if(d.value=!1,!p.params.id)return E.push({name:"home"});a.value=!0;try{await f.fetchPost(Number(p.params.id)),l.value={title:r.value.title,body:r.value.body},a.value=!1}catch{d.value=!0,a.value=!1}}),(y,n)=>{const x=t("v-snackbar"),V=t("v-btn"),b=t("v-col"),w=t("v-row"),S=t("v-skeleton-loader"),P=t("v-icon"),g=t("v-card"),B=t("v-card-text"),N=t("v-container");return v(),m(N,null,{default:e(()=>[o(x,{modelValue:s.value.show,"onUpdate:modelValue":n[0]||(n[0]=u=>s.value.show=u),timeout:2e3,color:s.value.type,location:"top right"},{default:e(()=>[h(U(s.value.text),1)]),_:1},8,["modelValue","color"]),o(w,{justify:"center"},{default:e(()=>[o(b,{cols:"12",sm:"8",md:"7",lg:"5"},{default:e(()=>[o(V,{to:{name:"home"},variant:"tonal",flat:""},{default:e(()=>[h("Back")]),_:1})]),_:1})]),_:1}),o(w,{justify:"center"},{default:e(()=>[o(b,{cols:"12",sm:"8",md:"7",lg:"5"},{default:e(()=>[a.value?(v(),m(S,{key:0,class:"border",type:"card"})):_("",!0),d.value&&!a.value?(v(),m(g,{key:1,height:"400",class:"text-center",color:"transparent",flat:""},{default:e(()=>[o(P,{color:"grey-darken-2",icon:"mdi-tab-search",size:"150"}),R]),_:1})):_("",!0),!a.value&&!d.value?(v(),m(g,{key:2,"min-width":"100%",title:`Edit post ID: ${r.value.id}`},{default:e(()=>[o(B,null,{default:e(()=>[o(M,{onSubmit:k,title:l.value.title,"onUpdate:title":n[1]||(n[1]=u=>l.value.title=u),body:l.value.body,"onUpdate:body":n[2]||(n[2]=u=>l.value.body=u),isLoadingSubmit:i.value},null,8,["title","body","isLoadingSubmit"])]),_:1})]),_:1},8,["title"])):_("",!0)]),_:1})]),_:1})]),_:1})}}});export{F as default};
